"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}var StudentsApi=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"request",value:function(e,t,r){return fetch("".concat(this.URL).concat(t?"/".concat(t):""),{method:e,body:r?JSON.stringify(r):void 0,headers:{"Content-type":"application/json"}}).then(function(e){if(e.ok)return e.json();throw new Error("Canot execute request method",{cause:e})})}},{key:"getList",value:function(){return this.request("GET").catch(function(e){throw new Error("Can not retrieve students list from server")})}},{key:"create",value:function(e){return this.request("POST","",e).catch(function(e){throw new Error("Can not create student on server")})}},{key:"update",value:function(e,t){return this.request("PUT",e,t).catch(function(e){throw new Error("Can not update student on server")})}},{key:"delete",value:function(e){return this.request("DELETE",e).catch(function(e){throw new Error("Can not delete student on server")})}}]),e}();_defineProperty(StudentsApi,"URL","https://636937fa28cd16bba7184e47.mockapi.io/api/todo/students-list");
"use strict";var $containerStudentList=$(".container"),$form=$("form"),$table=$("table"),$name=$("#name"),studentList=[],MARKS=new Array(10).fill("0");function onFormSubmit(t){t.preventDefault(),createStudent(getStudent()),clearForm()}function onDeleteBtnClick(){var t=this.closest(".item"),n=t.dataset.id;StudentsApi.delete(n).then(function(){console.log(studentList),studentList=studentList.filter(function(t){return t.id!==n}),console.log(studentList)}),t.remove()}function onMarkClick(){var r=this;$(this).focusout(function(){var t=r.closest(".item"),n=t.dataset.id,t=Array.from(t.querySelectorAll(".mark")).map(function(t){return t.value}),e=studentList.find(function(t){return t.id===n});e.marks=t,StudentsApi.update(n,e).catch(showError)})}function createStudent(t){StudentsApi.create(t).then(function(t){studentList.push(t),renderStudentsList(studentList)}).catch(showError),addStudent(t)}function addStudent(t){$containerStudentList.append(getTemplate(t))}function getStudent(){return{name:$name.val(),marks:MARKS}}function getStudentsList(){StudentsApi.getList().then(function(t){return studentList=t}).then(renderStudentsList).catch(showError)}function renderStudentsList(t){$containerStudentList.html(t.map(getTemplate))}function getTemplate(t){var n=t.id,e=t.marks,t=t.name;return'\n    <tr class="item" data-id="'.concat(n,'">\n        <td>').concat(t,'</td>\n        <td class="itemMarks">').concat(e.map(function(t){return'<input class="mark" value="'.concat(t,'">')}).join(""),'</td>\n        <td><button class="deleteBtn">Delete</button></td>\n    </tr>\n    ')}function clearForm(){$form[0].reset()}function showError(t){t=t.message;alert(t)}getStudentsList(),$form.on("submit",onFormSubmit),$containerStudentList.on("click",".deleteBtn",onDeleteBtnClick),$containerStudentList.on("click",".mark",onMarkClick);
//# sourceMappingURL=app.js.map
